{% extends "base.html" %}

{% block title %}Resume Analyzer - Match Your Resume to Job Descriptions{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-container">
            <h1 class="hero-title">Resume Analyzer</h1>
            <p class="hero-subtitle">Analyze your resume against job descriptions to find the perfect match. Get insights on how to improve your resume for specific job opportunities.</p>
            <a href="#analyzer" class="btn btn-primary btn-lg">Analyze Your Resume</a>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features">
    <div class="container">
        <h2 class="section-title">How It Works</h2>
        <p class="section-subtitle">Our AI-powered resume analyzer helps you understand how well your resume matches specific job descriptions.</p>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-upload"></i>
                </div>
                <h3 class="feature-title">Upload</h3>
                <p class="feature-description">Upload your resume and a job description you're interested in. We support PDF and TXT formats.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3 class="feature-title">Analyze</h3>
                <p class="feature-description">Our AI analyzes your resume against the job description, looking at skills, experience, and more.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <h3 class="feature-title">Results</h3>
                <p class="feature-description">Get a detailed report with compatibility score, strengths, gaps, and suggestions for improvement.</p>
            </div>
        </div>
    </div>
</section>

<!-- Analyzer Section -->
<section id="analyzer" class="analyzer">
    <div class="container">
        <div class="analyzer-container">
            <div class="analyzer-content">
                <h2 class="analyzer-title">Analyze Your Resume</h2>
                <p class="analyzer-description">Upload your resume and a job description to see how well they match. Get insights on how to improve your resume for better job opportunities.</p>
                
                <div class="sample-files">
                    <h3>Don't have files ready?</h3>
                    <p>Try our sample files to see how the analyzer works:</p>
                    <div class="sample-buttons">
                        <button id="use-sample-resume" class="btn btn-outline">Use Sample Resume</button>
                        <button id="use-sample-jd" class="btn btn-outline">Use Sample Job Description</button>
                    </div>
                </div>
            </div>
            
            <div class="analyzer-form">
                <h3 class="form-title">Upload Your Files</h3>
                <form id="analyzer-form" action="/analyze" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                        <label class="form-label">Resume (PDF)</label>
                        <div class="file-upload" id="resume-upload">
                            <div class="file-upload-icon">
                                <i class="fas fa-file-upload"></i>
                            </div>
                            <div class="file-upload-text">Drag & drop your resume here</div>
                            <div class="file-upload-hint">or click to browse (PDF only)</div>
                            <input type="file" name="resume" accept=".pdf" id="resume-input">
                        </div>
                        <div class="file-preview" id="resume-preview" style="display: none;">
                            <i class="fas fa-file-pdf file-preview-icon"></i>
                            <span class="file-preview-name" id="resume-name"></span>
                            <i class="fas fa-times file-preview-remove" id="resume-remove"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Job Description (PDF or TXT)</label>
                        <div class="file-upload" id="jd-upload">
                            <div class="file-upload-icon">
                                <i class="fas fa-file-upload"></i>
                            </div>
                            <div class="file-upload-text">Drag & drop your job description here</div>
                            <div class="file-upload-hint">or click to browse (PDF or TXT)</div>
                            <input type="file" name="job_description" accept=".pdf,.txt" id="jd-input">
                        </div>
                        <div class="file-preview" id="jd-preview" style="display: none;">
                            <i class="fas fa-file-alt file-preview-icon"></i>
                            <span class="file-preview-name" id="jd-name"></span>
                            <i class="fas fa-times file-preview-remove" id="jd-remove"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary form-submit">
                            <i class="fas fa-search"></i> Analyze
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Benefits Section -->
<section class="benefits">
    <div class="container">
        <h2 class="section-title">Why Use Resume Analyzer?</h2>
        
        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-bullseye"></i>
                </div>
                <h3 class="benefit-title">Accurate Matching</h3>
                <p class="benefit-description">Our AI uses advanced NLP techniques to accurately match your resume with job requirements.</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-industry"></i>
                </div>
                <h3 class="benefit-title">Industry Versatile</h3>
                <p class="benefit-description">Works across various industries and job roles, from tech to finance to healthcare.</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <h3 class="benefit-title">Actionable Insights</h3>
                <p class="benefit-description">Get specific suggestions on how to improve your resume for each job application.</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h3 class="benefit-title">Privacy First</h3>
                <p class="benefit-description">Your data is processed securely and never stored or shared with third parties.</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta">
    <div class="container">
        <div class="cta-container">
            <h2 class="cta-title">Ready to Improve Your Job Applications?</h2>
            <p class="cta-description">Start analyzing your resume against job descriptions today and increase your chances of landing your dream job.</p>
            <a href="#analyzer" class="btn btn-cta btn-lg">Analyze Your Resume Now</a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
    /* Additional styles for the index page */
    .sample-files {
        margin-top: 2rem;
        padding: 1.5rem;
        background-color: var(--bg-tertiary);
        border-radius: var(--radius-lg);
    }
    
    .sample-files h3 {
        font-size: 1.25rem;
        margin-bottom: 0.75rem;
    }
    
    .sample-buttons {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
        flex-wrap: wrap;
    }
    
    @media (max-width: 768px) {
        .sample-buttons {
            flex-direction: column;
        }
    }
    
    /* Success message */
    .success-message {
        padding: 1rem;
        margin-bottom: 1.5rem;
        border-radius: var(--radius-md);
        background-color: rgba(16, 185, 129, 0.1);
        border-left: 4px solid var(--secondary-color);
        color: var(--secondary-color);
        font-weight: 500;
        animation: fadeIn 0.3s ease-in-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add success message container if it doesn't exist
        if (!document.querySelector('.success-message')) {
            const formContainer = document.querySelector('.analyzer-form');
            const form = document.querySelector('#analyzer-form');
            const successMessage = document.createElement('div');
            successMessage.className = 'success-message';
            successMessage.style.display = 'none';
            successMessage.innerHTML = '<p></p>';
            formContainer.insertBefore(successMessage, form);
        }
        
        // Function to show success message
        function showSuccess(message) {
            const successMessage = document.querySelector('.success-message');
            successMessage.querySelector('p').textContent = message;
            successMessage.style.display = 'block';
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 5000);
        }
        
        // File upload event listeners
        const resumeInput = document.getElementById('resume-input');
        const jdInput = document.getElementById('jd-input');
        
        if (resumeInput) {
            resumeInput.addEventListener('change', function() {
                if (this.files.length > 0) {
                    const resumePreview = document.getElementById('resume-preview');
                    const resumeName = document.getElementById('resume-name');
                    
                    resumeName.textContent = this.files[0].name;
                    resumePreview.style.display = 'flex';
                    
                    showSuccess('Resume uploaded successfully!');
                }
            });
        }
        
        if (jdInput) {
            jdInput.addEventListener('change', function() {
                if (this.files.length > 0) {
                    const jdPreview = document.getElementById('jd-preview');
                    const jdName = document.getElementById('jd-name');
                    
                    jdName.textContent = this.files[0].name;
                    jdPreview.style.display = 'flex';
                    
                    showSuccess('Job description uploaded successfully!');
                }
            });
        }
        
        // Sample file functionality
        const useSampleResumeBtn = document.getElementById('use-sample-resume');
        const useSampleJdBtn = document.getElementById('use-sample-jd');
        
        if (useSampleResumeBtn) {
            useSampleResumeBtn.addEventListener('click', function() {
                // Create a File object from the sample resume
                fetch('/static/samples/sample_resume_data_science.pdf')
                    .then(response => response.blob())
                    .then(blob => {
                        const file = new File([blob], 'sample_resume_data_science.pdf', { type: 'application/pdf' });
                        
                        // Set the file to the input
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(file);
                        
                        const resumeInput = document.getElementById('resume-input');
                        resumeInput.files = dataTransfer.files;
                        
                        // Trigger change event
                        const event = new Event('change', { bubbles: true });
                        resumeInput.dispatchEvent(event);
                        
                        // Show preview
                        const resumePreview = document.getElementById('resume-preview');
                        const resumeName = document.getElementById('resume-name');
                        
                        resumeName.textContent = file.name;
                        resumePreview.style.display = 'flex';
                        
                        showSuccess('Sample resume loaded successfully!');
                    })
                    .catch(error => {
                        console.error('Error loading sample resume:', error);
                        alert('Error loading sample resume. Please try uploading your own file.');
                    });
            });
        }
        
        if (useSampleJdBtn) {
            useSampleJdBtn.addEventListener('click', function() {
                // Create a File object from the sample job description
                fetch('/static/samples/sample_jd_software_engineer.pdf')
                    .then(response => response.blob())
                    .then(blob => {
                        const file = new File([blob], 'sample_jd_software_engineer.pdf', { type: 'application/pdf' });
                        
                        // Set the file to the input
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(file);
                        
                        const jdInput = document.getElementById('jd-input');
                        jdInput.files = dataTransfer.files;
                        
                        // Trigger change event
                        const event = new Event('change', { bubbles: true });
                        jdInput.dispatchEvent(event);
                        
                        // Show preview
                        const jdPreview = document.getElementById('jd-preview');
                        const jdName = document.getElementById('jd-name');
                        
                        jdName.textContent = file.name;
                        jdPreview.style.display = 'flex';
                        
                        showSuccess('Sample job description loaded successfully!');
                    })
                    .catch(error => {
                        console.error('Error loading sample job description:', error);
                        alert('Error loading sample job description. Please try uploading your own file.');
                    });
            });
        }
        
        // File removal functionality
        const resumeRemove = document.getElementById('resume-remove');
        const jdRemove = document.getElementById('jd-remove');
        
        if (resumeRemove) {
            resumeRemove.addEventListener('click', function() {
                const resumeInput = document.getElementById('resume-input');
                const resumePreview = document.getElementById('resume-preview');
                
                resumeInput.value = '';
                resumePreview.style.display = 'none';
            });
        }
        
        if (jdRemove) {
            jdRemove.addEventListener('click', function() {
                const jdInput = document.getElementById('jd-input');
                const jdPreview = document.getElementById('jd-preview');
                
                jdInput.value = '';
                jdPreview.style.display = 'none';
            });
        }
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
    });
</script>
{% endblock %}
